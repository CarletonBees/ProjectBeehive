<html>
<head>
  <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script type="text/javascript">
//header javascript code + initialization of Google Charts Libraries	
		google.charts.load('current', {'packages':['corechart']}); //load charts and packages
		google.charts.setOnLoadCallback(CreateHumidChart); //Draws Humidity chart when chart is loaded
		google.charts.setOnLoadCallback(CreateTempChart); //Draws Humidity chart when chart is loaded
	    
	window.onmessage = (event) => {
		if (event.data.trim() == "Update") {
			CreateHumidChart();
			CreateTempChart();
        }
    };

	//Query of url for humidity values
    function CreateHumidChart() {
      var query = new google.visualization.Query('https://docs.google.com/spreadsheets/d/192PI2xfYmpF3hQNbOFuJOV0LnDJKKGkCJyiFe698RU0/gviz/tq?sheet=Sheet3&headers=1&range=A:B');
      query.send(handleHUMIDSampleDataQueryResponse);
    }
	
	//Query of url for temperature values

	//Response to humidity query with chart creation
    function handleHUMIDSampleDataQueryResponse(response) {
      if (response.isError()) {
        alert('Error in query: ' + response.getMessage() + ' ' + response.getDetailedMessage());
        return;
    }
	 var options = {
        title: ' Humidity Values ',
		legend: {position: 'none'},
		vAxis: {format:'0.00'},
		//xAxis: {format:'00:00'}
      };
      var data = response.getDataTable();
      var chart = new google.visualization.LineChart(document.getElementById('humid_chart_div'));
      chart.draw(data, options);
    }

	//TEMPCHART
	function CreateTempChart() {
      var query = new google.visualization.Query('https://docs.google.com/spreadsheets/d/192PI2xfYmpF3hQNbOFuJOV0LnDJKKGkCJyiFe698RU0/gviz/tq?sheet=Sheet4&headers=1&range=A:B');
      query.send(handleTEMPSampleDataQueryResponse);
    }
	
	//Query of url for temperature values

	//Response to humidity query with chart creation
    function handleTEMPSampleDataQueryResponse(response) {
      if (response.isError()) {
        alert('Error in query: ' + response.getMessage() + ' ' + response.getDetailedMessage());
        return;
    }
	 var options = {
        title: ' Temeprature Values ',
		legend: {position: 'none'},
		vAxis: {format:'0.00'},
		//xAxis: {format:'00:00'}
      };
      var data = response.getDataTable();
      var chart = new google.visualization.LineChart(document.getElementById('temp_chart_div'));
      chart.draw(data, options);
    }
	
//footer javascript code	
  </script>
</head>
<body>
     <div id= "humid_chart_div" style="width: 440px; height: 300px"></div>
     <div id= "temp_chart_div" style="width: 440px; height: 300px"></div>

</body>
</html>
